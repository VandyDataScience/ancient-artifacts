---
title: "12-vroom-load"
output: html_notebook
---

The purpose of this notebook is to load data from multiple sources into a single dataframe for analysis.
```{r}
#Import helpful packages
library(haven)
library(vroom)
library(boxr)
library(janitor)
library(assertr)
library(dplyr)
library(magrittr)

setwd("~/Mark/Spring 2021/Research/ancient-artifacts")

```

Here we will begin with a single csv file into a dataframe

```{r}
#Store file name for access - test with single file name with csv files
file <- "./LithicExperimentalData.csv"
file

lithic <- vroom(file, delim = ",")


```

Here we will attempt to create a templatized data frame for automated reading
```{r}
# todo - clean up by  ignoring the info on the 2nd line [is it units]

column_data_types <- c(.default = "d", Id = "c")
templatedLithic <- vroom(file, delim = ",", .name_repair = ~ janitor::make_clean_names(., case = "snake"),
                         col_types = column_data_types)                         
templatedLithic$img_id <- as.character(templatedLithic$img_id)
templatedLithic <- templatedLithic [-c(1), ]

templatedLithic

##IDEA: Make a single csv file that has all the types and their associated values for the columns and vroom that in as a value that gets passed to the col_types argument

```

Here we will pull from a compressed folder and store in a single dataframe
```{r}
zip_file <- "./SoilData.zip"

allData <- vroom #this only reads in the first file in this zip folder

#this reads in all the data from the zip
filenames <- unzip(zip_file, list = TRUE)$Name
iteratedData <- vroom(purrr::map(filenames, ~ unz(zip_file, .x))  )


```
